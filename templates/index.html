{{define "head"}}

<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<title>Configuration </title>
{{end}}

{{define "navbar"}}
<div class="collapse navbar-collapse" id="menuItems">
    <ul class="navbar-nav me-auto">
        <li class="nav-item">
            <a href="/instructions" class="nav-link">Instructions</a>
        </li>
        <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="/" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                Copy URL
            </a>
            <ul class="dropdown-menu bg-darkgray" aria-labelledby="navbarDropdown">
                <li>
                    <a class="dropdown-item text-lgray" onclick="copyOP()" role="button">
                        <img class="me-1" src="static/img/op_logo.svg" title="open project logo" style="width: 20px;height: 20px;">
                        Copy Open Project endpoint
                    </a>
                </li>
                <li>
                    <a class="dropdown-item text-lgray" onclick="copyGithub()" role="button">
                        <img class="me-1" src="static/img/github_logo.svg" title="github logo" style="width: 20px;height: 20px;">
                        Copy Github endpoint
                    </a>
                </li>
                <li>
                    <a class="dropdown-item text-lgray" onclick="copyGitlab()" role="button">
                        <img class="me-1" src="static/img/gitlab_logo.svg" title="gitlab logo" style="width: 20px;height: 20px;">
                        Copy Gitlab endpoint
                    </a>
                </li>
            </ul>
        </li>
    </ul>
</div>
<div class="topnav-right">
    <button type="button" class="btn btn-sync me-3 btn-lg" onclick="loading()">
        <span class="btn-sync__text">
            Refresh 
            <span class="material-symbols-outlined inline-icon">sync</span>
        </span>
    </button>
</div>
{{end}}

{{define "content"}}
<div class="container-fluid">
    <form action="/upload" method="post" enctype="multipart/form-data">
        <div class="row text-center mx-4 mt-4 mb-1">
            <div class="col-md-4 mb-3">
                <h4>Open Project</h4>
                <label class="mb-2" for="op_apikey">Api Key:</label><br>
                <input type="password" id="op_apikey" name="op_apikey"><br>
                <input class="mt-1 me-1" type="checkbox" onclick="myFunction('op_apikey')"><label class="mt-1" style="font-size: 12px">Show key</label> 
            </div>
            <div class="col-md-4 mb-3">
                <h4>Github</h4>
                <!-- <label class="mb-2" for="gh_user">User:</label><br>
                <input type="text" id="gh_user" name="gh_user"><br>
                <label class="mb-2" for="gh_apikey">Api Key:</label><br>
                <input type="password" id="gh_apikey" name="gh_apikey"><br>
                <input class="mt-1 me-1" type="checkbox" onclick="myFunction('gh_apikey')"><label class="mt-1" style="font-size: 12px">Show key</label>  -->
                <a href="/github/login">LOGIN</a>
            </div>
            <div class="col-md-4 mb-3">
                <h4>Gitlab</h4>
                <label class="mb-2" for="gl_user">User:</label><br>
                <input type="text" id="gl_user" name="gluser"><br>
                <label class="mb-2" for="gl_apikey">Api Key:</label><br>
                <input type="password" id="gl_apikey" name="gl_apikey"><br>
                <input class="mt-1 me-1" type="checkbox" onclick="myFunction('gl_apikey')"><label class="mt-1" style="font-size: 12px">Show key</label> 
            </div>
        </div>
        <div class="row text-center">
            <div class="col-md-12">
                <input type="submit" name="submit" value="Upload">
            </div>
        </div>
    </form>
    <div class="row text-center m-4">
        <div class="col-md-12">
            <h4>Prompt</h4>
            <fieldset>
                hell
            </fieldset>
        </div>
    </div>

</div>
{{end}}

{{define "scripts"}}
<script>
    const url = (window.location.href).split(/[?#]/)[0] + "api/refresh";
    const theButton = document.querySelector(".btn-sync");

    function refresh(){
        fetch(url).then(res => {
            return res.text()
        }).then(text => {
            theButton.classList.remove("btn-sync--loading");
            Swal.fire({
                title: "REFRESHED",
                text: text,
                icon: "info"
            })
        })
    }
    function loading(){
        refresh();
        theButton.classList.add("btn-sync--loading");
    }
</script>
<script>
    function myFunction(id) {
        var x = document.getElementById(id);
        if (x.type === "password") {
            x.type = "text";
        } else {
            x.type = "password";
        }
    }
</script>
{{end}}