{{define "head"}}

<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
<title>Logs</title>
{{end}}

{{define "navbar"}}
<div class="collapse navbar-collapse" id="menuItems">
    <ul class="navbar-nav me-auto">
        <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="/" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                Copy URL
            </a>
            <ul class="dropdown-menu bg-darkgray" aria-labelledby="navbarDropdown">
                <li>
                    <a class="dropdown-item text-lgray" onclick="copyOP()" role="button">
                        <img class="me-1" src="static/img/op_logo.svg" title="open project logo" style="width: 20px;height: 20px;">
                        Copy Open Project endpoint
                    </a>
                </li>
                <li>
                    <a class="dropdown-item text-lgray" onclick="copyGithub()" role="button">
                        <img class="me-1" src="static/img/github_logo.svg" title="github logo" style="width: 20px;height: 20px;">
                        Copy Github endpoint
                    </a>
                </li>
                <li>
                    <a class="dropdown-item text-lgray" onclick="copyGitlab()" role="button">
                        <img class="me-1" src="static/img/gitlab_logo.svg" title="gitlab logo" style="width: 20px;height: 20px;">
                        Copy Gitlab endpoint
                    </a>
                </li>
            </ul>
        </li>
    </ul>
</div>
<div class="topnav-right">
    <button type="button" class="btn btn-sync me-3 btn-lg" onclick="loading()">
        <span class="btn-sync__text">
            Refresh 
            <span class="material-symbols-outlined inline-icon">sync</span>
        </span>
    </button>
</div>
{{end}}

{{define "sidebar-top"}}
<div id="back">
    <a onclick="window.history.go(-1);" style="cursor: pointer;"><span class="material-symbols-outlined">keyboard_backspace</span>&ensp;Back</a>
</div>
{{end}}

{{define "sidebar-bottom"}}
{{end}}

{{define "content"}}
<div class="container-fluid px-5">
    <div class="mb-3" style="color: white;">
        <pre id="logs"></pre>
        <a> Logs must appear here </a>
    </div>
</div>
{{end}}

{{define "scripts"}}
    <!--<script src="static/js/console.js" type="text/javascript"></script>-->

    <script type="text/javascript">
        function blackground() {
            body = document.getElementById("body");
            body.style.background = "rgb(33, 33, 33)";
        }

        window.onload = blackground();
    </script>

    <script>
        const url = window.location.href.split(location.pathname)[0] + "api/refresh";
        const theButton = document.querySelector(".btn-sync");

        function refresh(){
            fetch(url).then(res => {
                return res.text()
            }).then(text => {
                theButton.classList.remove("btn-sync--loading");
                let type = "";
                if (text.startsWith("Error")) { type = "error" }
                else { type = "success" }
                Swal.fire({
                    title: "Finished refreshing tasks",
                    text: text,
                    icon: type
                })
            })
        }
        function loading(){
            refresh();
            theButton.classList.add("btn-sync--loading");
        }
    </script>
{{end}}